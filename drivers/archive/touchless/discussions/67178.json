[
  {
    "Id": "228378",
    "ThreadId": "67178",
    "Html": "<p>Hi</p>\r\n<p>I'm trying to get a webcam feed onto the XNA drawn form that doesn't have a picturebox control on it to invoke the&nbsp;paint method on. I was trying spriteBatch.Draw but I'm getting no error and no change in my display. Code is refusing to paste in, but its basically the Form_Load from the walkthrough section</p>\r\n<p><a href=\"http://www.jsynnott.com\">JSynnott</a>&nbsp;- it looks like one of your samples on <a href=\"http://www.jsynnott.com/tag/microsoft-touchless/\">http://www.jsynnott.com/tag/microsoft-touchless/</a>&nbsp;may have done exactly what I need, so if you can help would be appreciate - love the game demo btw</p>\r\n<p>Thanks</p>\r\n<p>Andrew</p>",
    "PostedDate": "2009-08-27T06:24:02.817-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "228416",
    "ThreadId": "67178",
    "Html": "<p>c&amp;p doesn't work for me in this editor here, too, but clicking the html-button, adding a &lt;pre&gt;&lt;/pre&gt; tag and inserting the code inside this tag works fine :)</p>",
    "PostedDate": "2009-08-27T07:48:27.917-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "228697",
    "ThreadId": "67178",
    "Html": "<p>Unfortuantly the same doesn't work for me, thanks though. I can see a numbr of people have done this with directshow, only one example with touchless so far. I think its just drawing it onto a 2d texture but I'm not doing so well with that....</p>",
    "PostedDate": "2009-08-28T06:29:35.78-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "248150",
    "ThreadId": "67178",
    "Html": "<p>Hi guys, I've just done this exact thing. I played around for a while and managed to display the image from the camera in XNA and have the image moved around by the marker.</p>\r\n<p>I took a screenshot of the marker, saved it as a bitmap, and I load that as marker 0.</p>\r\n<p>Here's the code:</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">using</span> System;\r\n<span style=\"color:Blue\">using</span> Microsoft.Xna.Framework;\r\n<span style=\"color:Blue\">using</span> Microsoft.Xna.Framework.Graphics;\r\n<span style=\"color:Blue\">using</span> Microsoft.Xna.Framework.Input;\r\n<span style=\"color:Blue\">using</span> TouchlessLib;\r\n<span style=\"color:Blue\">using</span> System.Drawing;\r\n\r\n<span style=\"color:Blue\">namespace</span> TouchlessGame\r\n{\r\n    <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;summary&gt;</span>\r\n    <span style=\"color:Gray\">///</span><span style=\"color:Green\"> This is the main type for your game</span>\r\n    <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;/summary&gt;</span>\r\n    <span style=\"color:Blue\">public</span> <span style=\"color:Blue\">class</span> Game1 : Microsoft.Xna.Framework.Game\r\n    {        \r\n        GraphicsDeviceManager graphics;\r\n        SpriteBatch spriteBatch;\r\n        TouchlessMgr touchMan;\r\n        Sprite sprite;\r\n        Texture2D camImage;\r\n\r\n        <span style=\"color:Blue\">public</span> Game1()\r\n        {\r\n            graphics = <span style=\"color:Blue\">new</span> GraphicsDeviceManager(<span style=\"color:Blue\">this</span>);\r\n            Content.RootDirectory = <span style=\"color:#A31515\">&quot;Content&quot;</span>;\r\n        }\r\n\r\n        <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;summary&gt;</span>\r\n        <span style=\"color:Gray\">///</span><span style=\"color:Green\"> Allows the game to perform any initialization it needs to before starting to run.</span>\r\n        <span style=\"color:Gray\">///</span><span style=\"color:Green\"> This is where it can query for any required services and load any non-graphic</span>\r\n        <span style=\"color:Gray\">///</span><span style=\"color:Green\"> related content.  Calling base.Initialize will enumerate through any components</span>\r\n        <span style=\"color:Gray\">///</span><span style=\"color:Green\"> and initialize them as well.</span>\r\n        <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;/summary&gt;</span>\r\n        <span style=\"color:Blue\">protected</span> <span style=\"color:Blue\">override</span> <span style=\"color:Blue\">void</span> Initialize()\r\n        {\r\n            <span style=\"color:Green\">// TODO: Add your initialization logic here</span>\r\n            touchMan = <span style=\"color:Blue\">new</span> TouchlessMgr();\r\n            <span style=\"color:Blue\">foreach</span> (Camera c <span style=\"color:Blue\">in</span> touchMan.Cameras)\r\n            {\r\n                <span style=\"color:Blue\">if</span> (c != <span style=\"color:Blue\">null</span>)\r\n                {\r\n                    touchMan.CurrentCamera = c;\r\n                    <span style=\"color:Blue\">break</span>;\r\n                }\r\n            }\r\n            camImage = <span style=\"color:Blue\">new</span> Texture2D(GraphicsDevice, touchMan.CurrentCamera.CaptureWidth, touchMan.CurrentCamera.CaptureHeight);\r\n            touchMan.CurrentCamera.OnImageCaptured += <span style=\"color:Blue\">new</span> EventHandler&lt;CameraEventArgs&gt;(CurrentCamera_OnImageCaptured);\r\n            sprite = <span style=\"color:Blue\">new</span> Sprite();\r\n\r\n            <span style=\"color:Blue\">base</span>.Initialize();\r\n        }\r\n\r\n        <span style=\"color:Blue\">void</span> CurrentCamera_OnImageCaptured(<span style=\"color:Blue\">object</span> sender, CameraEventArgs e)\r\n        {\r\n            camImage = TextureFromBitmap(e.Image);\r\n        }\r\n\r\n        <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;summary&gt;</span>\r\n        <span style=\"color:Gray\">///</span><span style=\"color:Green\"> LoadContent will be called once per game and is the place to load</span>\r\n        <span style=\"color:Gray\">///</span><span style=\"color:Green\"> all of your content.</span>\r\n        <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;/summary&gt;</span>\r\n        <span style=\"color:Blue\">protected</span> <span style=\"color:Blue\">override</span> <span style=\"color:Blue\">void</span> LoadContent()\r\n        {\r\n            <span style=\"color:Green\">// Create a new SpriteBatch, which can be used to draw textures.</span>\r\n            spriteBatch = <span style=\"color:Blue\">new</span> SpriteBatch(GraphicsDevice);\r\n\r\n            <span style=\"color:Green\">// TODO: use this.Content to load your game content here</span>\r\n            Bitmap b = <span style=\"color:Blue\">new</span> Bitmap(<span style=\"color:#A31515\">@&quot;D:\\glowstick.bmp&quot;</span>);\r\n            touchMan.AddMarker(<span style=\"color:#A31515\">&quot;glowstick&quot;</span>, b, <span style=\"color:Blue\">new</span> System.Drawing.Point(10, 10), 20);\r\n            touchMan.Markers[0].Highlight = <span style=\"color:Blue\">true</span>;\r\n            touchMan.Markers[0].SmoothingEnabled = <span style=\"color:Blue\">true</span>;\r\n            touchMan.Markers[0].Threshold = 15;\r\n            Console.WriteLine(touchMan.MarkerCount.ToString());\r\n            <span style=\"color:Green\">//sprite.LoadContent(this.Content, &quot;front&quot;);</span>\r\n            sprite.SetContent(camImage);\r\n            sprite.Position = <span style=\"color:Blue\">new</span> Vector2(100, 200);\r\n\r\n        }\r\n\r\n        <span style=\"color:Blue\">private</span> Texture2D TextureFromBitmap(Bitmap bmp)\r\n        {\r\n            Texture2D tx = <span style=\"color:Blue\">null</span>;\r\n            <span style=\"color:Blue\">using</span> (System.IO.MemoryStream s = <span style=\"color:Blue\">new</span> System.IO.MemoryStream())\r\n            {\r\n                bmp.Save(s, System.Drawing.Imaging.ImageFormat.Png);\r\n                s.Seek(0, System.IO.SeekOrigin.Begin);\r\n                tx = Texture2D.FromFile(GraphicsDevice, s);\r\n            }\r\n            <span style=\"color:Blue\">return</span> tx;\r\n        }\r\n\r\n        <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;summary&gt;</span>\r\n        <span style=\"color:Gray\">///</span><span style=\"color:Green\"> UnloadContent will be called once per game and is the place to unload</span>\r\n        <span style=\"color:Gray\">///</span><span style=\"color:Green\"> all content.</span>\r\n        <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;/summary&gt;</span>\r\n        <span style=\"color:Blue\">protected</span> <span style=\"color:Blue\">override</span> <span style=\"color:Blue\">void</span> UnloadContent()\r\n        {\r\n            <span style=\"color:Green\">// TODO: Unload any non ContentManager content here</span>\r\n        }\r\n\r\n        <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;summary&gt;</span>\r\n        <span style=\"color:Gray\">///</span><span style=\"color:Green\"> Allows the game to run logic such as updating the world,</span>\r\n        <span style=\"color:Gray\">///</span><span style=\"color:Green\"> checking for collisions, gathering input, and playing audio.</span>\r\n        <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;/summary&gt;</span>\r\n        <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;param name=&quot;gameTime&quot;&gt;</span><span style=\"color:Green\">Provides a snapshot of timing values.&lt;/param&gt;</span>\r\n        <span style=\"color:Blue\">protected</span> <span style=\"color:Blue\">override</span> <span style=\"color:Blue\">void</span> Update(GameTime gameTime)\r\n        {\r\n            <span style=\"color:Green\">// Allows the game to exit</span>\r\n            <span style=\"color:Blue\">if</span> (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)\r\n                <span style=\"color:Blue\">this</span>.Exit();\r\n\r\n            <span style=\"color:Green\">// TODO: Add your update logic here</span>\r\n            \r\n            sprite.Position = <span style=\"color:Blue\">new</span> Vector2((<span style=\"color:Blue\">float</span>)touchMan.Markers[0].LastGoodData.X * 2, (<span style=\"color:Blue\">float</span>)touchMan.Markers[0].LastGoodData.Y * 2);\r\n            sprite.SetContent(camImage);\r\n\r\n            <span style=\"color:Blue\">base</span>.Update(gameTime);\r\n        }\r\n\r\n        <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;summary&gt;</span>\r\n        <span style=\"color:Gray\">///</span><span style=\"color:Green\"> This is called when the game should draw itself.</span>\r\n        <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;/summary&gt;</span>\r\n        <span style=\"color:Gray\">///</span> <span style=\"color:Gray\">&lt;param name=&quot;gameTime&quot;&gt;</span><span style=\"color:Green\">Provides a snapshot of timing values.&lt;/param&gt;</span>\r\n        <span style=\"color:Blue\">protected</span> <span style=\"color:Blue\">override</span> <span style=\"color:Blue\">void</span> Draw(GameTime gameTime)\r\n        {\r\n            GraphicsDevice.Clear(Microsoft.Xna.Framework.Graphics.Color.CornflowerBlue);\r\n\r\n            <span style=\"color:Green\">// TODO: Add your drawing code here</span>\r\n            spriteBatch.Begin();\r\n            sprite.Draw(<span style=\"color:Blue\">this</span>.spriteBatch);\r\n            spriteBatch.End();\r\n\r\n            <span style=\"color:Blue\">base</span>.Draw(gameTime);\r\n        }\r\n    }\r\n}\r\n</pre>\r\n</div>\r\n<p>And here's the Sprite class. I only used this because it was in some tutorial I was looking at.. I modified it a bit by adding the SetContent method.</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">using</span> Microsoft.Xna.Framework;\r\n<span style=\"color:Blue\">using</span> Microsoft.Xna.Framework.Content;\r\n<span style=\"color:Blue\">using</span> Microsoft.Xna.Framework.Graphics;\r\n\r\n<span style=\"color:Blue\">namespace</span> TouchlessGame\r\n{\r\n    <span style=\"color:Blue\">class</span> Sprite\r\n    {\r\n        <span style=\"color:Green\">//The current position of the Sprite</span>\r\n        <span style=\"color:Blue\">public</span> Vector2 Position = <span style=\"color:Blue\">new</span> Vector2(0, 0);\r\n\r\n        <span style=\"color:Green\">//The texture object used when drawing the sprite</span>\r\n        <span style=\"color:Blue\">private</span> Texture2D mSpriteTexture;\r\n\r\n        <span style=\"color:Blue\">public</span> <span style=\"color:Blue\">void</span> LoadContent(ContentManager theContentManager, <span style=\"color:Blue\">string</span> assetName)\r\n        {\r\n            mSpriteTexture = theContentManager.Load&lt;Texture2D&gt;(assetName);\r\n        }\r\n\r\n        <span style=\"color:Blue\">public</span> <span style=\"color:Blue\">void</span> SetContent(Texture2D tx)\r\n        {\r\n            mSpriteTexture = tx;\r\n        }\r\n\r\n        <span style=\"color:Blue\">public</span> <span style=\"color:Blue\">void</span> Draw(SpriteBatch spriteBatch)\r\n        {\r\n            spriteBatch.Draw(mSpriteTexture, Position, Color.White);\r\n        }\r\n    }\r\n}\r\n</pre>\r\n</div>",
    "PostedDate": "2009-10-21T08:12:33.503-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "505000",
    "ThreadId": "67178",
    "Html": "<p>Flyteuk I noticed in yours you are using TouchlessLib. I was just wondering what reference I need to include to use this</p>",
    "PostedDate": "2010-10-10T05:11:40.26-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "506985",
    "ThreadId": "67178",
    "Html": "<p>Sameone else got a problem work with&nbsp;following method:</p>\r\n<p>﻿﻿</p>\r\n<pre> private Texture2D TextureFromBitmap(Bitmap bmp)\r\n        {\r\n            Texture2D tx = null;\r\n            using (System.IO.MemoryStream s = new System.IO.MemoryStream())\r\n            {\r\n                bmp.Save(s, System.Drawing.Imaging.ImageFormat.Png);\r\n                s.Seek(0, System.IO.SeekOrigin.Begin);\r\n                tx = Texture2D.FromFile(GraphicsDevice, s);\r\n            }\r\n            return tx;\r\n        }\r\n\r\n</pre>\r\n<p>The webcam it showed in the XNA but the fot a LAG in all the timeon movie, i would like remove LAG's sameone can help me?</p>\r\n<p>At windowsform the lag doesnt happen.</p>",
    "PostedDate": "2010-10-13T19:30:50.417-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]